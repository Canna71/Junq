var junq=(function(f){var l=function(p){return p};var a=function(){return true};var c=function(){return false};var h=function(p,o){return p<o};var m=function(p,o){return p===o};var i=function(){};var e={moveNext:c,getCurrent:i};var b=function g(p){this._o=p;return this};var k=function(p){return new b(p)};b.prototype.getEnumerator=function(){return k.enumerate(this._o)};b.prototype.forEach=function(o){k.forEach(this,o)};b.prototype.filter=b.prototype.where=function(o){return k(k.filter(this,o))};b.prototype.toArray=function(){return k.toArray(this)};b.prototype.select=b.prototype.map=function(o){return k(k.select(this,o))};b.prototype.flatmap=function(o){return k(k.flatmap(this,o))};b.prototype.flatten=function(){return k(k.flatten(this))};b.prototype.append=function(p){return k(k.append(k(p)).to(this))};b.prototype.first=function(o){return k.first(this,o)};b.prototype.any=function(o){return k.any(this,o)};b.prototype.min=function(o){return k.min(this,o)};b.prototype.max=function(o){return k.max(this,o)};b.prototype.aggregate=function(p,o){return k.aggregate(this,p,o)};b.prototype.contains=function(p,o){return k.contains(this,p,o)};k.enumerate=function(p){if(p===f){throw new Error("Cannot enumerate undefined!")}if(p.getEnumerator){return p.getEnumerator()}if(p.moveNext&&p.getCurrent){return p}if(Array.isArray(p)||p.hasOwnProperty("length")){return new k.ArrayEnumerator(p)}if(arguments.length){return k.enumerate(arguments)}throw new Error("Cannot enumerate "+p)};k.forEach=function j(o,p){var q=k.enumerate(o);while(q.moveNext()){p(q.getCurrent())}};k.filter=k.where=function d(p,o){var q=k.enumerate(p);return({moveNext:function(){while(q.moveNext()){if(o(q.getCurrent())){return true}}return false},getCurrent:function(){return q.getCurrent()}})};k.select=k.map=function n(o,p){var q=k.enumerate(o);return({moveNext:function(){return q.moveNext()},getCurrent:function(){return p(q.getCurrent())}})};k.flatmap=function(o,r){var p=k.enumerate(o);var t=r||l;var q;var s;return({moveNext:function(){do{if(!q){if(!(q=p.moveNext())){return false}s=k.enumerate(t(p.getCurrent()))}if(q=s.moveNext()){return true}}while(!q);return false},getCurrent:function(){return s.getCurrent()}})};k.flatten=function(o,r){var p=k.enumerate(o);var t=r||l;var q;var s;return({moveNext:function(){do{if(!q){if(!(q=p.moveNext())){return false}s=k.enumerate(p.getCurrent())}if(q=s.moveNext()){return true}}while(!q);return false},getCurrent:function(){return t(s.getCurrent())}})};k.toArray=function(p){var o=[];k.forEach(p,function(q){o.push(q)});return o};k.range=function(p,q,o){return k({getEnumerator:function(){return new k.RangeEnumerator(p,q,o)}})};k.append=function(o){return{to:function(p){return k.concat(p,o)}}};k.concat=function(p,o){return k.flatten(k.enumerate([p,o]))};k.first=function(p,o){var q=o||a;var r=k.enumerate(p);while(r.moveNext()){if(q(r.getCurrent())){return r.getCurrent()}}return f};k.any=function(p,o){return k.first(p,o)!==f};k.min=function(o,p){var q=p||h;return k.aggregate(o,function(s,r){return s&&q(s,r)?s:r})};k.max=function(o,p){var q=p||h;return k.aggregate(o,function(s,r){return !s||q(s,r)?r:s})};k.aggregate=function(p,o,q){var r=q;k.forEach(p,function(s){r=o(r,s)});return r};k.contains=function(q,r,p){p=p||m;return k.any(q,function(o){return p(r,o)})};k.repeat=function(o,p){return k({getCurrent:function(){return o},moveNext:function(){return(p--)>0}})};k.ArrayEnumerator=(function(){function o(p){this._array=p;this._current=-1}o.prototype.moveNext=function(){this._current++;return this._current<this._array.length};o.prototype.getCurrent=function(){return this._array[this._current]};return o})();k.RangeEnumerator=(function(){function o(q,r,p){if(r===f){r=0}if(p===f){p=1}if(q===f){throw new Error("length must be speccified")}this._current=r-p;this._length=q;this._step=p}o.prototype.moveNext=function(){if(this._length>0){this._length--;this._current+=this._step;return true}return false};o.prototype.getCurrent=function(){return this._current};return o})();return k})();if(typeof(module)!=="undefined"){module.exports=junq};